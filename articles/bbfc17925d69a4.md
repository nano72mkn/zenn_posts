---
title: "Claude Code Actionは怖いので、Claude Codeを使ってどこまでできるかやってみた"
emoji: "💸"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["Claude Code Actions", "Claude Code", "aiエージェント"]
published: true
---

Maxプランを契約したので、遊んでみた記録

## Maxを契約した
Claude Codeで遊んでみたくて、ClaudeのMaxプランを契約した

## 一旦、Claude Code Actionsで遊んでみた
Maxプランでは、Claude Code Actionsを動かすことはできず、別途APIを発行する必要がある
10ドルだけ課金してみてちょっと動かしてみた。
issueに実装したい内容を書いて、`@claude`でお願いするだけ。
勝手にTodoを作って自走してくれるので、寝てる時や別作業をやってるときに出来上がっているのは感動した。
しかし、監視してない分動かないコードとかも量産されてPR見てなんのCIも通っていないとか結構あった。
何回かレビューして、直してもらってを繰り返したが僕のマネージメント力では目的のコードを出してもらうのにだいぶ掛かった。

寝てる間に、何かしてる間に、イメージしたものが出来上がっているのを想像してたので、ちょっと残念。

Claude Code Actionsはお金もかかるので、一旦ここまで。

ローカルで動くClaude Codeを触ってみることにした

## Claude CodeをMaxで使い倒す
とりあえず、指示したらどうゆうことをしてくれるのかは、Claude Code Actionsで遊んでみて大体わかった。

### どうすれば、思ったコードが出るのか
まずは、プロジェクトのテストを充実させてもらった。
個人開発だったので手を抜いていた部分。

React Native + Expoで実装されているアプリなので、expo-jestの導入などが必要になってくるが、Claude Codeにお願いしたら、expo-jestを使わないで、不必要なパッケージを大量にinstallしてきた。
`jest-setup.js`なども準備して、得意げに「作成しました！」と報告をしてきた。
結局、そのままでは動かないので、Expoのドキュメント通りに手動で作り直した。

数行書くだけでtestが動いたので、最初から手でやればよかった。

全てのコンポーネントのテストを書いてもらう。
もちろん、動かないテストを書いてきた。
とりあえず、一個サンプルでテストを書いて、これを参考にtestを書いてと言えば、しっかりと動くものを作って来た
それでも、完璧ではなく壊れたテストも書いてくる。


#### ダメだったコードの特徴

1. ないものをimportしてくる
ないので、動かない。

2. 独自の使い方を編み出してくる
型を無視した実装をしているので、エディタを見たらエラーだらけ

3. 設定されていないthemeを指定してくる
設定されていないので、エラーが出て動かない

#### 対策

どれもこれも、lintとtype checkを行えば、ダメだと気づける間違いであったので、lintとtype checkを必ず実行するようにCLAUDE.mdに記載した。

「独自の使い方を編み出してくる」については、よく間違った使い方をしているライブラリの使い方をcursorに書いてもらった。
ライブラリの使い方などは、cursorの方がしっかり理解していた。

また、「設定されていないthemeを指定してくる」については、themeの設定ファイルを記載。
なければ作れというところまで書いてみた。今のところ追記はしてくれていない。

これで、大体いい感じのコードを出してくれるようになった。

### 擬似的なClaude Code Actionsにしてみる

Claude Code Actionsの特徴といえば、issue書いてお願いしたら出来上がっているというもの。
（もしかしたら、もっと深い使い方があるかもしれない）

であれば、Claude Codeがissue読んでくれたらそれっぽいジャンということで、試してみた。

> issueの5を確認して

![](/images/bbfc17925d69a4/2025-06-04-18-52-12.png)

これでissueを確認することができた。

issueを確認できるということは、確認して作業してもらえればClaude Code Actionsを擬似的に再現できるということですね！

![](/images/bbfc17925d69a4/2025-06-04-18-57-50.png)

ついでに、プルリクも出してもらいます。
Claude Code Actionsでは、issueのコメントから「Create PR ➔」を押さなければプルリクは作成されませんが、Claude Codeであればghコマンドを使ってプルリクの作成までやってもらえます。

また、readやwright権限など、渡しても問題ないものをできるだけ渡すことで、やや自走してくれます。

もう、ほぼClaude Code Actionsですね

lintやtestも許可して、できるだけ完璧にしてからPRを出してもらえます。
これは、トークンに怯えなくてもいいMaxの特権ですね。

### ccusageを使って、擬似的にいくら分使ったのかを確認してみた

ccusageは使用したトークン量から、

5/28から6/4まで約8日使用した結果...
![](/images/bbfc17925d69a4/2025-06-04-19-05-11.png)

$283.11でした。
出来るだけ自走させているせいかか、すでにMaxの料金である$100はペイできました。

もし、従量課金をしていたと思うとビビりますね

## まとめ
従量課金でビビりながら使うよりも、Maxを契約して使い倒してみた方が試行錯誤しまくれるので、結果的にClaude Codeを使いこなすことができると思いました。

また、MaxではClaude Code Actionsは使えませんが、使いこなしていないということもあってか、今のところなくてもいいかなって思っています。

