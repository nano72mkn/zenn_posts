---
title: "React Conf 2021をみたよ"
emoji: "✨"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["react"]
published: true
---

:::message
この記事は、[スターフェスティバル Advent Calendar 2021](https://qiita.com/advent-calendar/2021/stafes)の4日目です。
:::

# はじめに
2021/12/9に開催された**React Conf 2021**の感想記事です！

https://conf.reactjs.org/

アーカイブは↓こちらから！

https://www.youtube.com/watch?v=8dUpL8SCO1w&t=2920s

動画内のまとめ記事ではないので、興味があった箇所を軽く紹介しつつ感想を書いてるだけの記事です。  
なので、詳しく詳細をみたい！という方は、アーカイブへ!  
各項目ごとにどこについて話しているか分かり易いように、  
再生箇所を指定したリンク（何ていうんだろう？）を貼っておきますので、気になったら活用してみてください！  
# 本題 - React Conf 2021

## あいさつ

[15:00 ~](https://youtu.be/8dUpL8SCO1w?t=899)

最初の挨拶  

Framerで作ったデザインをJSXでエクスポートでき、それをReactでそのまま使える。
そんなツールが出てきているよ！
すごい！けど、驚くことじゃないよ。設計原則に根差しているからね！

とのこと。

アンドリューさんは驚いていませんでしたが、
Framerでアニメーションを作る時にドキュメントを漁っていた時、  
たまたま迷い込んだDevelop（だった気がするその時から）で少し体験してめっちゃ驚きました。

そんな機能あったなーと思って久々に見に行ったら、さらにパワーアップ....!

https://www.framer.com/developers/handshake/

:::details Framerおまけ
```javascript
import Card from "https://framer.com/**********"
```
こんな感じでComponent読み込めるらしい！！！、すごいですね!

さらに、スクロールしていったら
Firebaseからデータ持ってくるとか、顔追跡とかとか!!!
え、UI作れるだけでもすごいのに！？
パワーアップ!の領域を遥かに凌駕してました....!!!!
:::

## Suspense

[20:10 ~](https://youtu.be/8dUpL8SCO1w?t=1210)

おそらく、待ってた人も多いであろう機能！  
個人的にどうにかできないかなと試行錯誤している部分だったので、あがりました！  

### いやいや、Suspenseってなんなのさ

[Relay](https://relay.dev/)や[Apollo ClientのHooks](https://www.apollographql.com/docs/react/api/react/hooks/)、[SWR](https://swr.vercel.app/ja)などを使用している方はよくわかると思うのですが、  
データを取得しているコンポーネント、下記のようになっていると思います。 
（動画の内容そのまま）

```javascript
function Main() {
  return <List pageId={pageId} />
}
```

```javascript
function List({ pageId }) {
  const [items, isLoading] = useData(pageId);

  if (isLoading) {
    return <Spinner />;
  }

  return items[pageId].map(item => 
    <li>{item}</li>
  );
}
```

よく見る！！！って感じのコンポーネントです。
このコンポーネントでは、

- データの取得
- Spinnerを返す

の２つを行なっていますが、そもそもそれってまとめてる必要ないよね？

それ、Suspense使えば解決です（ドーン）

```javascript
function Main() {
  return (
    <Suspense fallback={<Spinner />}>
      <List pageId={pageId} />
    </Suspense>
  );
}
```

```javascript
function List({ pageId }) {
  const items = useData(pageId);

  return items[pageId].map(item => 
    <li>{item}</li>
  );
}
```

Spinnerが親コンポーネントへ移動し、Listがスッキリ！  
めっちゃみやすい

求めてたのは、こうゆうの！！

さらに、下記の画像のように

![](/images/aa1040c1abd97b/image1.png)

コンポーネント内にtitleと画像のコンポーネントがあり、各コンポーネント内でfetchしてる場合

```javascript
function Main() {
  return (
    <Suspense fallback={<Spinner />}>
      <Title pageId={pageId} />
      <Image pageId={pageId} />
    </Suspense>
  );
}
```
これでもいけます！（最高）
titleとimageの両方のfetchを待機し、完了すると表示。

```javascript
function Main() {
  return (
    <Suspense fallback={<Spinner />}>
      <Title pageId={pageId} />
      <Suspense fallback={<Spinner2 />}>
        <Image pageId={pageId} />
      </Suspense>
    </Suspense>
  );
}
```
titleもimageも読み込み中なら`Spinner`を、画像だけなら`Spinner2`を表示するということも可能みたいです！

##


